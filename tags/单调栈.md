---

相关题目

- 42.接雨水
- 84.柱状图中最大的矩形
- 85.最大矩形
- 768.最多能完成排序的块 II
- 1124.表现良好的最长时间段
- 1130.叶值的最小代价生成树

---

## 单调栈

单调栈分为单调递增栈和单调递减栈

单调递增栈即栈内元素保持单调递增的栈，同理单调递减栈即栈内元素保持单调递减的栈

单调栈递增栈的生成模板算法：

```template
for 从左到右循环:
  if 栈不为空 && 栈顶元素 >= 当前元素:
    while 栈顶元素 >= 当前元素:
      出栈
  入栈
```

单调栈里存的是元素值或元素下标

## 概念题（帮助理解单调栈的概念）

给定一个长度为N的整数数列，输出每个数左边第一个比它小的数，如果不存在则输出-1。

数据范围

1≤N≤10^5 数列长度

输入

[3 4 2 7 5]

输出

[-1 3 -1 2 2]

---

### 思路

#### 暴力解法

for 从左向右遍历数组 :
  当前位置向左遍历，直到遇到比他小的元素

时间复杂度 O(N^2),空间复杂度O(1)

#### 单调栈

```javascript
function singleStack(nums) {
  let stack = [],
    ans = new Array(nums.length).fill(0)

  for (let i = 0; i < nums.length; i++) {
    if (stack.length > 0 && stack[stack.length - 1] >= nums[i]) {
      while (stack[stack.length - 1] >= nums[i]) {
        stack.pop()
      }
    }
    if (stack.length == 0) ans[i] = -1
    else ans[i] = stack[stack.length - 1]
    stack.push(nums[i])
  }
  return ans
}
```

单调栈的意义：可以在O(N)的时间复杂度，找到两边第一个小于或大于当前元素的值
单调递增栈用于找两边第一个小于当前元素的值；单调递减栈

## [84.柱状图中最大的矩形](../algorithms/1-100/84.%20柱状图中最大的矩形.md)

单调递增栈

## [42.接雨水](../algorithms/1-100/42.%20接雨水.md)

单调递减栈
